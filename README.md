# MovieDB Discovery
An app for playing around with recent iOS/swift as all my repos are privatly owned by Companies I've worked for.

Here I'm building a viewer for themoviedb.org that shows:

 - The list of popular movies.
 - Allows search by movie title with auto search.
 - Allows Pagination and pull to refresh

Things left to do and I couldn't due to the time limitation and sickness:
- Add offline capabilities,
 Note: I've started with Coredata - check CoreData branch - but couldn't find time to complete at the moment.
- Show movie details when a movie is selected
- Use a 3rd party for mocking the service responses (ex.DVR), and UI tests.


# 3rd Party
I have used Alamofire, and AlamofireImage for building the API layer faster and easier and asynch image loading respectively. However if I have enough time and the app is big, I'd go with building my own stack using URLSession.

I used Carthage as dependancy manager as there is no need for a cluttered workspace that can be generated by pods.

# Architecture 
I have ussed MVVM and Dependancy Injection pattern Pattern.

Service layer :
- APISessionProtocol:  A protocol provides interface for API Generic requests, Right now it has a getRequest(). 
- APISession: Conforms to APISessionProtocol. It is responsible of validating the response and serialize it to Json and call the completion block with the json or error if any.
- MoviesRequestHandlerProtocol: A protocol provides interface for Movies API requests and allows APISession injection.
- MoviesRequestHandler: Conforms to MoviesRequestHandlerProtocol. It is responsible of calling APISession to get the popular movies list and search by title, and convert the result to a list of movies to retrun it in the completion block, or error instead.

ModelView:
- MoviesListViewModelProtocol: A protocol provides interface for MoviesList ViewModel with all possible data loading and manapulation.
- MoviesListViewModel: Conforms to MoviesListViewModelProtocol. It enables the view to request loading, searching, refreshing movies list among other functionality. It uses the MoviesRequestHandler and MoviesListViewModelDelegate by Injection.
- MoviesViewModel: A viewModel for Movie to formate the data to be shown in the cell.

Views:
- MoviesCell: A UIVIewTableViewCell to hold Movie title, score, relase_data, and poster
- MoviesViewController: A UIVIewController that shows the moviesList, it conforms to UITableViewDataSource, UISearchBarDelegate,
UISearchResultsUpdating, UITableViewDataSourcePrefetching. I used extention for managing the file size, However I'd refactor it to add another controller that acts as the delegate to the TableView, and searchBar if there's more time
- SearchFooter: A UIView to show searchbar . It's reused from a tutorial code, Hence the remianed copyrights.

Model:
- Movie: A struct that holds movie properities.

# Running
In the APISession at line 45, replace the value for "api-key" with the valid API key value. You can instead search for "// TODO: to be replaced with the real key"
